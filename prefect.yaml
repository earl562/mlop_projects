# Prefect deployment configuration for PlotLot v2
# Deploy: prefect deploy --all
# Requires prefect-server running (see docker-compose.yml)

deployments:
  - name: ingest-weekly
    description: "Weekly ingestion of zoning ordinances from all municipalities"
    entrypoint: src/plotlot/pipeline/ingest.py:ingest_all_flow
    schedule:
      cron: "0 2 * * 0"  # Sundays at 2am
    work_pool:
      name: plotlot-pool

  - name: eval-nightly
    description: "Nightly evaluation quality check against golden dataset"
    entrypoint: src/plotlot/pipeline/eval_flow.py:eval_quality_check
    parameters:
      tag: "nightly"
    schedule:
      cron: "0 4 * * *"  # Daily at 4am
    work_pool:
      name: plotlot-pool
